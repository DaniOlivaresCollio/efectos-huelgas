"0","# Crear una columna con la variable ""rel_empleo"" adelantada una ola"
"0","data <- data %>%"
"0","  # arrange(idencuesta, ola) %>%  # Ordena por id y ola, por si acaso no está ordenado"
"0","  group_by(idencuesta) %>%        # Agrupa por id para trabajar en cada individuo"
"0","  mutate(rel_empleo_lagged=lag(as.character(rel_empleo),n=1)) %>%  # Desplaza ""rel_empleo"" a la siguiente ola, "
"0","                                                                   # conviertiendo el factor en character temporalmente"
"0","  ungroup()"
"0",""
"0","# Rellenar los valores NA en la variable original"
"0","data <- data %>%"
"0","  mutate(rel_empleo=ifelse(is.na(rel_empleo),rel_empleo_lagged,as.character(rel_empleo))) %>%  # Si rel empleo es NA, sustituir con el valor de la ola anterior y asegurarse que actividad esté en formato carácter"
"0","  mutate(rel_empleo=factor(rel_empleo)) %>%  # Convertir de nuevo a factor"
"0","  select(-rel_empleo_lagged)                 # Elimina la columna temporal"
