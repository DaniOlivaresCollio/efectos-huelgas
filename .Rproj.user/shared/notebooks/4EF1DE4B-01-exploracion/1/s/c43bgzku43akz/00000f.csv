"0","# Crear una columna con la variable rel_empleo adelantada una ola"
"0","data <- data %>%"
"0","  # arrange(idencuesta, ola) %>%  # Ordena por id y ola, por si acaso no está ordenado"
"0","  group_by(idencuesta) %>%        # Agrupa por id para trabajar en cada individuo"
"0","  mutate(rel_empleo_lagged=lag(as.character(rel_empleo),n=1)) %>%  # Desplaza rel_empleo a la siguiente ola, conviertiendo el factor en character temporalmente"
"0","  ungroup()"
"0",""
"0","# Rellenar los valores NA (de las olas que no estaban) en la variable original"
"0","data <- data %>%"
"0","  mutate(rel_empleo=ifelse(!is.na(rel_empleo),as.character(rel_empleo),rel_empleo_lagged)) %>%  # Si rel empleo no es NA, sustituir con el valor de rel_empleo, y si es NA con la ola variable desplazada una ola y asegurarse que actividad esté en formato carácter"
"0","  mutate(rel_empleo=factor(rel_empleo)) %>%  # Convertir de nuevo a factor"
"0","  select(-rel_empleo_lagged)                 # Elimina la columna temporal"
