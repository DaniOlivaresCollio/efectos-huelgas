"0","# Crear una columna con la variable ""isic4"" adelantada una ola"
"0","data$isic4 <- as.numeric(data$isic4)"
"0",""
"0","data <- data %>%"
"0","  arrange(ola) %>%  # Ordena por ola, por si acaso no estÃ¡ ordenado"
"0","  group_by(idencuesta) %>%        # Agrupa por id para trabajar en cada individuo"
"0","  mutate(isic4_lagged=lag(isic4,n=1)) %>%  # Desplaza ""isic4"" a la siguiente ola"
"0","  ungroup() "
"0",""
"0","# Rellenar los valores NA en la variable original"
"0","data <- data %>%"
"0","  mutate(isic4=ifelse(!is.na(isic4),isic4,isic4_lagged)) %>%  # Si isic4 es NA, sustituir con el valor de la ola anterior"
"0","  select(-isic4_lagged)                 # Elimina la columna temporal"
